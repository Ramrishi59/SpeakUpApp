/* =========================================
   Speak Up — dupestyle.css (final aligned)
   ========================================= */

/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&family=Comic+Neue:wght@400;700&display=swap');

/* Theme tokens */
:root{
  --header-h: 64px;

  /* grid row heights (defaults; can be overridden per state) */
  --word-h:  clamp(72px, 12svh, 120px);
  --stage-h: clamp(180px, 40svh, 340px);

  --title: #ff3b3b;
  --word:  #ff3b3b;

  --prev-bg:#ffb431; --prev-tx:#fff;
  --next-bg:#2bb673; --next-tx:#fff;

  --tile-bg:#ff7a59; --tile-tx:#fff;
  --ring:#fff;
  --shadow:0 8px 16px rgba(0,0,0,.18);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:'Comic Neue',system-ui,sans-serif;
  background:
    url('Images/Unit1/background-sky.webp') center/cover no-repeat fixed,
    #bfe9ff;
  color:#333;
}

/* Header */
.app-header{
  position:sticky; top:0; z-index:100;
  height:var(--header-h);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px;
  background:#ffd54f; color:#222; font-weight:700;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.score-display{
  position:absolute; top:10px; right:12px;
  display:flex; gap:8px; align-items:center;
  padding:6px 12px; border-radius:999px;
  background:#ffe082; box-shadow:0 2px 6px rgba(0,0,0,.15);
  font-weight:700;
}
.star-icon{width:26px;height:26px}

/* Screen container */
.container.full-screen-center{
  min-height:calc(100svh - var(--header-h));
  display:flex; align-items:flex-start; justify-content:center;
  padding:10px 0 0; overflow:hidden;
}

/* ---------- ONE GRID FOR EVERYTHING ---------- */
.word-display{
  width:100%; max-width:680px; margin:0 auto;
  /* MASTER GRID (same for intro/word/outro) */
  display:grid;
  grid-template-rows:
    auto            /* 1 title */
    var(--word-h)   /* 2 word slot / intro line */
    var(--stage-h)  /* 3 image stage (0 on intro/outro) */
    1fr             /* 4 spacer that pushes nav to consistent Y */
    auto            /* 5 nav */
    auto;           /* 6 start */
  row-gap:10px;
  justify-items:center;
  min-height:calc(100svh - var(--header-h) - 10px);
  padding:0 12px;
}

/* Title */
.lesson-title{
  grid-row:1;
  margin:6px 0 2px;
  font-family:'Baloo 2',cursive; font-weight:700;
  font-size:clamp(1.6rem,4.8vw,2.4rem);
  color:var(--title);
  text-shadow:2px 2px 0 #fff;
}

/* Big word (row 2) — also used as “slot” height anchor */
#wordText{
  grid-row:2;
  height:var(--word-h);
  width:100%;
  display:grid; place-items:center;
  text-align:center; margin:0; max-width:90%;
  font-family:'Baloo 2',cursive; font-weight:700;
  font-size:clamp(1.6rem,5.2vw,2.6rem);
  line-height:1.1; color:var(--word);
  text-shadow:1.5px 1.5px 0 #fff;
}

/* Intro/Outro line uses the same row/slot (row 2) */
#lessonText{
  grid-row:2; align-self:center; justify-self:center;
  margin:0; text-align:center; max-width:60ch;
  font-family:'Baloo 2',cursive; font-weight:700;
  font-size:clamp(1.6rem,5.2vw,2.6rem);
  color:var(--word);
  text-shadow:1.5px 1.5px 0 #fff;
}

/* Image stage (row 3) — uniform visual size */
.image-stage{ 
  grid-row:3;
  height:var(--stage-h);
  width:min(88%,520px);
  display:grid; place-items:center;
}
.image-stage img,#wordImage{
  max-width:100%; max-height:100%;
  width:auto; height:auto; object-fit:contain; display:block;
}

/* Visibility by state */
.word-display.has-image #lessonText{ display:none; }      /* word screens show word+image */
.word-display.is-intro  #wordText,
.word-display.is-outro  #wordText{ display:none; }        /* intro/outro show lessonText */
.word-display.is-intro  .image-stage,
.word-display.is-outro  .image-stage{ display:none; }     /* no image on intro/outro */

/* On intro/outro, collapse the image row so spacing is perfect */
.word-display.is-intro, .word-display.is-outro{ --stage-h: 0px; }

/* ---------- NAV (row 5) ---------- */
.navigation-buttons{
  grid-row:5;
  width:100%; max-width:520px;
  display:flex; justify-content:space-between; align-items:center;
  gap:14px;
}

/* Pills */
.nav-btn{
  --ring:4px;
  padding:14px 26px;
  border:none; border-radius:999px;
  font-family:'Baloo 2',cursive; font-weight:700;
  font-size:clamp(1rem,3.6vw,1.1rem);
  letter-spacing:.5px; text-transform:uppercase;
  color:#fff; box-shadow:var(--shadow);
  outline:var(--ring) solid #fff; outline-offset:0;
  cursor:pointer; transition:transform .08s ease, filter .15s ease;
}
.nav-btn:active{ transform: translateY(1px); }
#prevButton{ background:var(--prev-bg); color:var(--prev-tx); }
#nextButton{ background:var(--next-bg); color:var(--next-tx); }
#prevButton::before{ content:'❮'; margin-right:8px; }
#nextButton::after{ content:'❯'; margin-left:8px; }

/* ---------- ACTIONS (row 6) ---------- */
.action-buttons{
  grid-row:6;
  width:100%; max-width:520px;
  display:flex; justify-content:space-between; gap:14px;
  margin:6px 0 12px;
}
.action-buttons button,
#startoverButton{
  flex:1 1 0;
  padding:12px 14px;
  border:none; border-radius:18px;
  background:var(--tile-bg); color:var(--tile-tx);
  font-family:'Baloo 2',cursive; font-weight:700;
  font-size:clamp(1rem,3.6vw,1.05rem);
  box-shadow:var(--shadow);
  outline:4px solid #fff; outline-offset:0;
  cursor:pointer;
}

/* Nav visibility per brief */
.word-display.is-intro  #prevButton{ visibility:hidden; }
.word-display.is-outro  #nextButton{ visibility:hidden; }

/* Misc */
button:disabled{ opacity:.55; cursor:not-allowed; filter:grayscale(10%); }
/* ===== PATCH: perfect intro/outro alignment ===== */

/* 1) Turn our fixed row sizes into variables so we can override per state */
.word-display{
    /* existing rows, but read from overridable vars */
    grid-template-rows:
      auto
      var(--row-word, var(--word-h))     /* word/intro line */
      var(--row-image, var(--stage-h))   /* image stage */
      var(--row-spacer, 1fr)             /* spacer that pushes nav */
      auto
      auto;
  }
  
  /* 2) For intro/outro:
        - use the word row as a flexible center lane (1fr)
        - remove image row (0px)
        - remove spacer (0), so buttons sit closer and consistent */
  .word-display.is-intro,
  .word-display.is-outro{
    --row-word: 1fr;       /* intro line owns the middle space */
    --row-image: 0px;      /* no image row */
    --row-spacer: 0;       /* no extra gap before buttons */
  }
  
  /* 3) Center the intro/outro text perfectly within its lane */
  .word-display.is-intro #lessonText,
  .word-display.is-outro #lessonText{
    place-self: center;        /* centers in row 2 both axes */
    text-align: center;
    max-width: 60ch;
    margin: 0;
    font-family: 'Baloo 2', cursive;
    font-weight: 700;
    font-size: clamp(1.6rem, 5.2vw, 2.6rem);
    line-height: 1.2;
    color: var(--word);
    text-shadow: 1.5px 1.5px 0 #fff;
  }
  
  /* 4) Make sure only lesson text shows on intro/outro */
  .word-display.is-intro  #wordText,
  .word-display.is-outro  #wordText { display: none; }
  .word-display.is-intro  .image-stage,
  .word-display.is-outro  .image-stage { display: none; }
  