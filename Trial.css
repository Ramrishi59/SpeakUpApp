/* =========================================================
   Speak Up — Trial.css  (clean, consolidated)
   ========================================================= */

/* ------------------------------
   Vars
------------------------------ */
:root{
  --sky1:#bde7ff;
  --sky2:#9dd8ff;
  --text:#333;
  --accent-red:#ff6f61;
  --accent-orange:#ffb300;
  --accent-green:#1fb573;
  --salmon:#ff7f61;
  --white:#fff;

  --font-heading:'Fredoka','Baloo 2','Comic Neue',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --font-body:   'Fredoka','Comic Neue','Baloo 2',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;

  --card-radius:20px;
  --shadow:0 6px 18px rgba(0,0,0,.12);
  --max-content:960px;

  --header-h:56px;

  /* Slide image/text sizing */
  --img-cap: 40svh;        /* image box height cap */
  --img-scale: 1;
  --img-nudge: 0svh;

  /* Buttons */
  --btn-h: 68px;
  --btn-font: 20px;
  --btn-pad-x: 22px;
  --btn-gap: 18px;

  --fx-dur-short: 320ms;
  --fx-dur: 800ms;
  --fx-ease: cubic-bezier(.2,.8,.2,1);

  --nav-btn-h: 96px;     /* size of the round nav coins (tweak 88–104px) */
}

/* ------------------------------
   Base
------------------------------ */
*{ box-sizing:border-box; }
html,body{
  height:100%;
  margin:0;
  color:var(--text);
  font-family:var(--font-body);
  background-image:url(Images/Unit1/Background_1.webp);
  background-size:cover;
  background-attachment:fixed;
}

/* ------------------------------
   Header
------------------------------ */
.unit-title{
  transform: translateY(20px);
  margin-left: 10px;
  text-align: left;
  font-family: var(--font-heading);
  font-weight: 600;
  font-size: clamp(28px, 2.6svh, 26px);
  color:#ed2e2e;
}

.score-bubble{
  font-weight:700;
  background:var(--white);
  padding:6px 12px;
  border-radius:999px;
  box-shadow:var(--shadow);
}

/* ------------------------------
   WORD / IMAGE SLIDE (Grid)
   Layout: title → image → word → nav → secondary
------------------------------ */
.word-display{
  min-height: calc(100svh - var(--header-h));
  max-width: var(--max-content);
  margin: 0 auto;
  padding: clamp(16px, 3svh, 32px) 16px calc(16px + env(safe-area-inset-bottom));
  display: grid;
  grid-template-areas:
    "title"
    "image"
    "word"
    "nav"
    "secondary";
  grid-template-rows:
    auto
    minmax(220px, var(--img-cap))
    minmax(90px, 18svh)
    auto
    auto;
  row-gap: clamp(10px, 1.8svh, 18px);
  justify-items: center;
}

/* Title row */
#lessonText{
  grid-area: title;
  margin: 12px 0 0;
  font-family:var(--font-heading);
  font-size: clamp(22px, 3.4svh, 38px);
  line-height:1.1;
  text-align:center;
  color: var(--salmon);
  text-shadow:
    0 0 0 rgb(236,226,226),
    1px 1px 0 rgb(236,226,226),
    -1px -1px 0 rgb(236,226,226),
    2px 2px 0 rgba(0,0,0,.08);
}

/* Image row */
.image-wrap{
  grid-area: image;
  width: min(520px, 86%);
  height: clamp(220px, var(--img-cap), 460px);
  margin: 0 auto;
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
}
#wordImage{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  filter: drop-shadow(0 8px 12px rgba(0,0,0,.18));
  border-radius:16px;
  transform: translateY(var(--img-nudge)) scale(var(--img-scale));
  transform-origin:center;
  will-change: transform;
}

/* Word row */
.word-block{
  grid-area: word;
  display:flex; align-items:center; justify-content:center;
  width:100%;
  padding: 0 12px; /* breathing room */
}
#wordText{
  font-family:var(--font-heading);
  font-weight:700;
  font-size: clamp(28px, 4.8svh, 36px);
  color: #000000ab;
  text-shadow:
    0 0 0 rgb(245,242,242),
    1.2px 1.2px 0 rgb(245,242,242),
    -1.2px -1.2px 0 rgb(245,242,242),
    2px 2px 0 rgba(0,0,0,.1);
  padding:4px 10px;
  border-radius:12px;
  max-width:90%;
  text-align:center;
  white-space:normal;
  line-height:1.2;
  /* no padding-top shove */
}

/* Nav row (Prev/Next) */
.nav-row{
  grid-area: nav;
  width:100%;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--btn-gap);
  align-items:stretch;
  justify-items:stretch;
  margin:0;
}

/* NAV BUTTON — single source of truth (round coin) */
.nav-btn{
  width: var(--nav-btn-h);
  height: var(--nav-btn-h);
  min-width: 56px;           /* safety floor so they never collapse */
  min-height: 56px;
  border-radius: 50%;
  border: 0;
  padding: 0;
  background: transparent;
  box-shadow: none;                                              /* fallback shadow */
  font-size: 0;                /* hides “PREV/NEXT” text; aria-label still read */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.nav-btn .chevrons{ display:none; }

/* Coin artwork — if PNG loads, it sits on top of the fallback */
.nav-btn::before{
  content:"";
  position:absolute; inset:0; margin:auto;
  width:100%; height:100%;
  background: center/100% no-repeat;
  pointer-events:none;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,.22));
}
.nav-btn:active::before{ transform: scale(.96); }

/* Hook in your files (check exact path + case) */
.nav-btn.prev::before{ background-image:url("Images/Buttons/19.png"); }
.nav-btn.next::before{ background-image:url("Images/Buttons/20.png"); }


/* Optional tiny nudges if the PNG canvases aren’t perfectly centered */
.nav-btn.prev::before{ background-position: 49% 50%; }
.nav-btn.next::before{ background-position: 51% 50%; }

/* 3) Center the pair neatly under the sentence */

/* NAV ROW — two big coins centered under the sentence */
.word-display .nav-row{
  grid-template-columns: repeat(2, var(--nav-btn-h));
  justify-content: center;
  justify-items: center;
  column-gap: clamp(28px, 8vw, calc(var(--nav-btn-h) * 0.6));
}


/* we no longer pin them to grid edges */
.nav-btn.prev, .nav-btn.next{ justify-self: auto; }

/* Bigger nav coins on lesson screens only */
.word-display { --nav-btn-h: 98px; }           /* try 88–96px */
@media (min-width: 420px){
  .word-display { --nav-btn-h: 96px; }
}



/* Secondary row (Home / Start Over) */
.secondary-row{
  grid-area: secondary;
  width:100%;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--btn-gap);
  align-items:stretch;
  justify-items:stretch;
  margin:0;
}
.secondary-btn{
  border:0; outline:0; text-decoration:none;
  font-family:var(--font-body);
  font-weight:700;
  font-size: var(--btn-font);
  color:var(--white);
  background: linear-gradient(#ff8d73,#ff6f54);
  height: var(--btn-h);
  padding: 0 var(--btn-pad-x);
  border-radius:16px;
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  box-shadow: var(--shadow);
  cursor:pointer;
  white-space: nowrap;
}
.secondary-btn .icon{ font-size:1.2em; }

/* ------------------------------
   INTRO / OUTRO screens
------------------------------ */
.intro-screen{
  min-height: calc(100svh - var(--header-h));
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  text-align:center; gap:16px;
  padding: 20px 16px;
}


/* intro NEXT placement: single col */
.intro-screen .nav-row{
  width:100%;
  display:grid;
  grid-template-columns:1fr;
  justify-items:center;
  margin-top:16px;
  padding-bottom:32px;
}

/* Intro video layout */
.intro-video-wrap{
  position:relative;
  width:min(680px, 92%);
  margin:0 auto;
  display:none; /* JS shows if item.video exists */
}
.intro-video{
  width:100%;
  height:auto;
  max-height:56svh;
  border-radius:16px;
  box-shadow: 0 10px 18px rgba(0,0,0,.18);
  background: rgba(0,0,0,.2);
}
#introPlayOverlay{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  z-index:2; border:none; background:none; cursor:pointer; padding:0;
}
#introPlayOverlay::before{
  content:"";
  display:block;
  width:90px; height:90px;
  background-image:url("Images/Unit1/playbutton.webp");
  background-size:contain; background-repeat:no-repeat; background-position:center;
}
.intro-video::-webkit-media-controls-start-playback-button{ display:none !important; }

.video-overlay{
  position:absolute; inset:0; display:none;
  align-items:center; justify-content:center;
  font-size:clamp(28px,5svh,40px);
  border:none; border-radius:16px;
  color:#fff; background:rgba(0,0,0,.35); cursor:pointer;
  backdrop-filter: blur(1px);
}

/* Full-viewport splash mode */
body.video-active { overflow:hidden; }
.video-active .unit-header { display:none; }

.intro-screen.video-fullscreen{
  position:fixed; inset:0; z-index:10;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:0; margin:0;
}
.intro-screen.video-fullscreen .intro-video-wrap{
  display:block; width:100vw; height:100svh;
}
.intro-screen.video-fullscreen .intro-video{
  width:100vw; height:100svh; max-height:none; border-radius:0;
  object-fit:contain; background:#000;
}
.intro-screen.video-fullscreen .nav-row{ display:none; }

.skip-overlay{
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:max(16px, env(safe-area-inset-bottom));
  padding:12px 18px; border:0; border-radius:18px;
  font-family: var(--font-heading); font-weight:700;
  color:#fff; background: linear-gradient(#2cd18c,#19a66a);
  box-shadow: 0 6px 18px rgba(0,0,0,.18); cursor:pointer;
}
.unmute-overlay{
  position:fixed; left:16px;
  top:max(16px, env(safe-area-inset-top));
  padding:10px 14px; border:0; border-radius:18px;
  font-family: var(--font-heading); font-weight:700;
  color:#333; background: linear-gradient(#ffcd4d,#ffa909);
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
  cursor:pointer; display:none;
}
.intro-bottom-controls{
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:max(16px, env(safe-area-inset-bottom));
  display:flex; align-items:center; justify-content:center; gap:12px;
}
.intro-bottom-controls .skip-overlay,
.intro-bottom-controls .unmute-overlay{
  position: static; transform:none;
}

/* Intro text bounce (optional, safe) */
/* .intro-text{ position:relative; font-family:var(--font-heading); font-weight:700; } */

.intro-text {
  font-family: var(--font-heading);
  font-weight: 700;
  font-size: clamp(34px, 6svh, 52px); /* bigger than current 30–40px */
  line-height: 1.3;
  text-align: center;
}


.intro-word{
  display:inline-block; opacity:0;
  transform: translateY(12px) scale(.94);
  animation: intro-bounce .7s cubic-bezier(.2,.9,.25,1.4) forwards;
  margin-right: .4em;
}
@keyframes intro-bounce{
  0%{ opacity:0; transform: translateY(16px) scale(.92); }
  60%{ opacity:1; transform: translateY(-6px) scale(1.08); }
  80%{ transform: translateY(2px) scale(.98); }
  100%{ transform: translateY(0) scale(1); }
}
@media (prefers-reduced-motion: reduce){
  .intro-word{ animation:none !important; opacity:1 !important; transform:none !important; }
}


/* ------------------------------
   Unit-specific tweak (optional)
------------------------------ */
body.unit-unit3{
  --img-scale: 1.82;
  --img-nudge: 0.9svh;
}
body.unit-unit3 .word-display{ overflow:hidden; }
body.unit-unit3 .image-wrap{ overflow:hidden; contain:paint; }

/* ------------------------------
   Responsive tweaks
------------------------------ */
@media (max-width: 420px){
  :root { --img-cap: 36svh; }  /* free a little vertical space on small phones */
}
@media (min-width: 760px){
  .nav-row, .secondary-row{ gap:24px; }
}

/* ------------------------------
   Misc
------------------------------ */

.intro-word{
  color:#e65a6b;
  text-shadow:
    0 0 0 rgb(236,226,226),
    1px 1px 0 rgb(236,226,226),
   -1px -1px 0 rgb(236,226,226),
    2px 2px 0 rgba(0,0,0,.08);
}


.outro .mascot, .outro .message { will-change: transform, opacity; }
.outro .mascot { transform-origin: 80% 30%; } /* tweak if needed */

/* Pop-in (once) */
.fx-pop { animation: outroPopIn var(--fx-dur-short) var(--fx-ease) both; }
@keyframes outroPopIn {
  0% { transform: scale(.9); opacity: 0; }
  60% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}

/* Single wave tilt */
.fx-wave-once { animation: outroWave 700ms ease-in-out both; }
@keyframes outroWave {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(-6deg) scale(1.005); }
  50% { transform: rotate(6deg) scale(.998); }
  100% { transform: rotate(0deg); }
}

/* Idle float (loop) */
.fx-float { animation: outroFloat 3s ease-in-out .8s infinite alternate; }
@keyframes outroFloat { from { transform: translateY(0); } to { transform: translateY(-6px); } }

/* Message cheer pop */
.fx-cheer { animation: msgCheer var(--fx-dur-short) var(--fx-ease) both; }
@keyframes msgCheer {
  0% { transform: translateY(6px) scale(.98); opacity: 0; }
  60% { transform: translateY(-2px) scale(1.04); opacity: 1; }
  100% { transform: translateY(0) scale(1); }
}

/* Text-only fallback pretties */
.outro.no-mascot .message { text-align:center; font-weight:700; position:relative; overflow:hidden; }
.outro.no-mascot .message.fx-shimmer::after {
  content:""; position:absolute; inset:0;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.4) 40%, transparent 80%);
  transform: translateX(-120%); animation: shimmerSweep 900ms ease-out 120ms both;
}
@keyframes shimmerSweep { to { transform: translateX(120%); } }

@media (prefers-reduced-motion: reduce) {
  .fx-pop, .fx-wave-once, .fx-float, .fx-cheer { animation: none !important; transform: none !important; opacity: 1 !important; }
}
/* ===== Minimal, scoped outro layout (no duplication) ===== */
body.outro-active #outroScreen{
  display: grid !important;
  place-items: center;
  gap: clamp(8px, 1.8svh, 18px);
  min-height: calc(100svh - var(--header-h));
  padding: clamp(8px, 2svh, 20px);
  text-align: center;
}

body.outro-active #outroScreen .message{
  margin: 0;
  max-width: 92vw;     /* keep text close to mascot */
}

body.outro-active #outroScreen .mascot{
  max-height: 46svh;   /* cap so it never fills the screen */
  max-width: 78vw;
  height: auto;
  width: auto;
  object-fit: contain;
  /* you already set transform-origin on .outro .mascot; that still applies */
}

/* Optional: landscape tighten */
@media (orientation: landscape) and (max-height: 520px){
  body.outro-active #outroScreen{ gap: 1.2svh; }
  body.outro-active #outroScreen .mascot{ max-height: 38svh; }
}

.footer-actions{
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: max(16px, env(safe-area-inset-bottom));
  z-index: 20;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--btn-gap);
  width: min(680px, 92vw);
}
.footer-actions .secondary-btn{ width: 100%; justify-content: center; }
@media (max-width: 360px){ .footer-actions{ grid-template-columns: 1fr; } }


/* Text outro: intro screen has .outro, footer is a later sibling */
.intro-screen.outro ~ #lessonActions .secondary-btn.home{
  transform: scale(1.1);
  background: linear-gradient(#2cd18c, #19a66a);
}

/* Mascot outro: body gets .outro-active */
body.outro-active #lessonActions .secondary-btn.home{
  transform: scale(1.1);
  background: linear-gradient(#2cd18c, #19a66a);
}

